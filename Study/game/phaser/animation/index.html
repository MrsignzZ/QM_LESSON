<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://cdn.bootcss.com/phaser/2.6.2/phaser.min.js"></script>
</head>
<body>

    <div id="game"></div>
    <script>
    //lib 
    //业务
    //Phaser.Game  游戏类
    var game = new Phaser.Game(800,600,Phaser.AUTO,'#game',{
        preload: preload,
        create: create,
        update: upadte,
    });
    //预加载图片，声音等
    function preload(){
        //背景
        game.load.image('lazur','./thorn_lazur.png');
        //精灵
        game.load.spritesheet('mummy','./metalslug_mummy37x45.png',38,45,18);
    }

    var back;//背景
    var mummy;//mummy 精灵
    var anim;
    var loopText;

    function create(){
        back = game.add.image(0,-400,'lazur');
        back.scale.set(2);//铺满屏幕
        back.smoothed = false;//抗锯齿

        mummy = game.add.sprite(200,360,'mummy',10);//取第十张图片为默认
        mummy.scale.set(4);
        mummy.smoothed = false;

        anim = mummy.animations.add('walk');
        anim.onStart.add(animationStarted,this);
        anim.onStart.add(animationLooped,this);
        anim.onStart.add(animationStopped,this);
        anim.play(10,true);
    }

    function animationStarted(sprite,animation){
        game.add.text(32,32,'Animation started',{
            fill:white
        });
    }

    function animationLooped(sprite,animation){
        if(animation.loopCount === 1){
            loopText = game.addText(32,64,'Animation Looped',{
                fill:white
            });
        } else {
            loopText = game .addText(32,64,'Animation Looped X2',{
                fill:white
            });
            animation.loop = false;
        }
    }

    function animationStopped(sprite,animation){

    }

    function upadte(){
        if(anim.isPlaying){
            back.x -= 1;
        }
    }
    </script>

</body>
</html>